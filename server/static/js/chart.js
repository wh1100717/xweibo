// Generated by CoffeeScript 1.7.1
$(function() {
  $.ajax({
    'type': 'get',
    'contentType': 'application/json',
    'url': '/sina/getfriend',
    'success': function(data) {
      var i, tmp, _i, _ref;
      alert(data);
      alert('---');
      data = eval(data);
      alert(data[0]);
      $('#container').highcharts({
        chart: {
          type: 'column'
        },
        title: {
          text: 'reposr and commite chart'
        },
        xAxis: {
          categories: data[0]
        },
        yAxis: {
          title: {
            text: 'counts'
          }
        },
        series: [
          {
            name: 'reports',
            data: data[1]
          }, {
            name: 'commites',
            data: data[2]
          }
        ]
      });
      tmp = "";
      alert(data[0].length);
      for (i = _i = 0, _ref = data[0].length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
        tmp = tmp + "<tr><th>" + data[0][i] + "</th><td>" + data[1][i] + "</td><td>" + data[2][i] + "</td></tr>";
      }
      $("#datatable").html("<thead><tr><th>姓名</th><th>转发数</th><th>评论数</th></tr></thead><tbody>" + tmp + "</tbody>");
    }
  });
  $.ajax({
    'type': 'get',
    'url': '/sina/getfriendsloc',
    'success': function(data) {
      alert(data);
      $('#container-platform').highcharts({
        chart: {
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false
        },
        title: {
          text: '分类应用数据分析'
        },
        subtitle: {
          text: 'PolySpider爬取应用所属分类饼状图'
        },
        tooltip: {
          pointFormat: '{series.name.percent}: <b>{point.percentage:.1f}%</b><br>{series.name.count}: <b>{point.y}</b><br>'
        },
        plotOptions: {
          pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              enabled: true,
              color: '#000000',
              connectorColor: '#000000',
              format: '<b>{point.name}</b>: {point.percentage:.1f} %'
            },
            showInLegend: true
          }
        },
        series: [
          {
            type: 'pie',
            name: {
              'percent': '百分比',
              'count': '应用数'
            },
            data: eval(data)
          }
        ]
      });
    }
  });
});
